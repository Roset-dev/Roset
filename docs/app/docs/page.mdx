import { Tabs, Tab } from '@/components/tabs'
import { Callout } from '@/components/callout'
import { Card, CardGrid } from '@/components/cards'
import { PromptCard } from '@/components/prompt-card'

export const metadata = {
  title: 'Roset Documentation',
  description: 'Transform unstructured files into structured data. Upload any document -- get back markdown, embeddings, metadata, and a searchable index.',
}

# Transform Unstructured Files into Structured Data

<Callout type="note">
Roset is currently in **public beta** (v0.1.1). The API is stable, but expect new features and providers regularly. Breaking changes will be communicated in advance.
</Callout>

Roset is the **transformation engine for unstructured data**. Upload any file -- PDF, image, audio, document -- and Roset routes it to the right extraction provider, generates embeddings, and gives you back four structured variants: **markdown**, **embeddings**, **metadata**, and a **searchable index**.

## Quick Start

<Tabs>
<Tab label="Python">
```python
from roset import Client

client = Client(api_key="rsk_...")

# Upload a file -- Roset routes it to the right extraction provider
file = client.files.upload(
    filename="invoice.pdf",
    content_type="application/pdf",
    size_bytes=45678,
)

# Poll until processing completes
import time
status = file["status"]
while status not in ("completed", "failed"):
    current = client.files.get(file["id"])
    status = current["status"]
    time.sleep(2)

# Retrieve the extracted markdown variant
variants = client.files.list_variants(file["id"])
print(variants)
```
</Tab>
<Tab label="TypeScript">
```typescript
import { RosetClient } from '@roset/sdk';

const client = new RosetClient({ apiKey: 'rsk_...' });

// Upload a file -- Roset routes it to the right extraction provider
const file = await client.files.upload({
  filename: 'invoice.pdf',
  content_type: 'application/pdf',
  size_bytes: 45678,
});

// Poll until processing completes
let status = file.status;
while (status !== 'completed' && status !== 'failed') {
  const current = await client.files.get(file.id);
  status = current.status;
}

// Retrieve the extracted markdown variant
const { variants } = await client.files.listVariants(file.id);
console.log(variants);
```
</Tab>
<Tab label="cURL">
```bash
# Upload a file -- Roset creates a processing job automatically
curl -X POST https://api.roset.dev/v1/upload \
  -H "Authorization: ApiKey rsk_..." \
  -F "file=@invoice.pdf"

# Check processing status
curl https://api.roset.dev/v1/files/FILE_ID \
  -H "Authorization: ApiKey rsk_..."

# Get extracted content (markdown, embeddings, etc.)
curl https://api.roset.dev/v1/files/FILE_ID/variants \
  -H "Authorization: ApiKey rsk_..."
```
</Tab>
</Tabs>


## Choose Your Path

<CardGrid>
  <Card
    title="I have files to upload"
    description="Upload documents via the SDK and get structured variants back -- markdown, embeddings, metadata, and more."
    href="/docs/start/quickstart"
  />
  <Card
    title="I have files in S3/GCS/Azure"
    description="Connect your existing bucket, sync metadata, and auto-process files already in cloud storage."
    href="/docs/workflows/sync-storage"
  />
</CardGrid>

<PromptCard
  title="Get started faster with AI"
  prompt="Roset (roset.dev) is a developer API that transforms unstructured files (PDFs, images, audio, DOCX) into structured variants: markdown, vector embeddings, metadata, and a searchable index. Python SDK: `pip install roset`. Init: `from roset import Client; client = Client(api_key='rsk_...')`. Key methods: `client.files.upload(filename, content_type, size_bytes)`, `client.files.get(file_id)` to poll status, `client.files.list_variants(file_id)` to retrieve outputs. Help me install the SDK, upload a PDF, poll until status is 'completed', then retrieve the markdown and embeddings variants."
/>

## What Can You Build?

- **[Transform Any File](/docs/workflows/transform)** -- Upload a file and get markdown + embeddings + metadata in one call. The "hello world" story.
- **[Build a Knowledge Base](/docs/workflows/knowledge-base)** -- Upload many files, search across them, and Q&A with citations. End-to-end RAG pipeline.
- **[Multi-Tenant Spaces](/docs/workflows/spaces)** -- Scope files per customer with spaces and portal tokens. B2B SaaS isolation pattern.
- **[Sync Cloud Storage](/docs/workflows/sync-storage)** -- Connect an S3/GCS/Azure bucket, sync files, auto-process, and get webhook notifications.


## How It Works

1. **Upload** a file via multipart form data or a signed URL. Roset stores metadata only -- file bytes go directly to your storage.
2. **Route** to the right extraction provider. Roset selects Reducto for documents, Gemini for images, or Whisper for audio based on content type.
3. **Extract** structured content. The provider returns markdown, and Roset stores the result as a variant on the file.
4. **Embed** the extracted content. Vector embeddings are generated automatically via OpenAI as a second variant.
5. **Retrieve** the original file metadata, extracted markdown, or embeddings through a single unified API.

```
Upload --> Route (Reducto / Gemini / Whisper) --> Extract --> Embed (OpenAI) --> Variants
```


## Core Concepts

- **Files** are documents tracked by Roset's metadata store. Each file has a processing status and zero or more variants.
- **Variants** are the extraction outputs linked to a parent file -- extracted markdown, vector embeddings, or structured metadata. See [Variant Types](/docs/features/variants) for details.
- **Jobs** represent the processing pipeline for a file. Each job moves through a state machine: `queued` -> `processing` -> `completed` or `failed`.
- **Connections** are linked storage buckets (S3, GCS, Azure Blob Storage, MinIO, Cloudflare R2, Supabase Storage).
- **Spaces** provide optional namespace isolation for multi-tenant applications. Defaults to `"default"`.
- **Provider Keys** are optional BYOK credentials for extraction providers. Roset uses managed keys by default.
- **Webhooks** deliver HTTP callbacks when processing events occur.


## Next Steps

- [Quickstart](/docs/start/quickstart) -- upload your first file in under 5 minutes.
- [Installation](/docs/start/installation) -- set up the Python or TypeScript SDK.
- [Python SDK](/docs/sdks/python) -- full Python client reference.
- [TypeScript SDK](/docs/sdks/typescript) -- full TypeScript client reference.
- [API Reference](/docs/reference/api) -- complete endpoint documentation.
