# Organization API

Manage team members, invitations, roles, and API keys within your tenant organization.

## List Members

<ApiEndpoint
  method="GET"
  path="/v1/org/members"
  description="List all members in the organization."
>
  <ResponseExample
    status={200}
    json={{
      members: [
        {
          id: "mem_123",
          tenantId: "tenant_abc",
          principalId: "user_456",
          email: "jane@example.com",
          name: "Jane Doe",
          role: "owner",
          joinedAt: "2025-01-01T00:00:00Z",
        },
      ],
      count: 1,
    }}
  />
</ApiEndpoint>

## Get Member

<ApiEndpoint
  method="GET"
  path="/v1/org/members/:memberId"
  description="Get details of a specific member."
>
  <ParameterTable
    type="path"
    params={[
      {
        name: "memberId",
        type: "string",
        required: true,
        description: "Member ID",
      },
    ]}
  />
  <ResponseExample
    status={200}
    json={{
      id: "mem_123",
      tenantId: "tenant_abc",
      principalId: "user_456",
      email: "jane@example.com",
      role: "owner",
      joinedAt: "2025-01-01T00:00:00Z",
    }}
  />
</ApiEndpoint>

## Invite Member

<ApiEndpoint
  method="POST"
  path="/v1/org/invites"
  description="Create a new email invitation. Returns an invite URL to share."
>
  <ParameterTable
    type="body"
    params={[
      {
        name: "email",
        type: "string",
        required: true,
        description: "Email address to invite",
      },
      {
        name: "role",
        type: "string",
        required: true,
        description: "Role: owner, admin, member, viewer",
      },
    ]}
  />
  <RequestExample
    json={{
      email: "colleague@example.com",
      role: "member",
    }}
  />
  <ResponseExample
    status={201}
    json={{
      id: "inv_789",
      email: "colleague@example.com",
      role: "member",
      expiresAt: "2025-01-08T00:00:00Z",
      inviteUrl: "https://api.roset.dev/invite/abc-123",
    }}
  />
</ApiEndpoint>

## List Invites

<ApiEndpoint
  method="GET"
  path="/v1/org/invites"
  description="List all pending invitations."
>
  <ResponseExample
    status={200}
    json={{
      invites: [
        {
          id: "inv_789",
          email: "colleague@example.com",
          role: "member",
          expiresAt: "2025-01-08T00:00:00Z",
          createdAt: "2025-01-01T00:00:00Z",
        },
      ],
    }}
  />
</ApiEndpoint>

## Revoke Invite

<ApiEndpoint
  method="DELETE"
  path="/v1/org/invites/:inviteId"
  description="Revoke a pending invitation."
>
  <ParameterTable
    type="path"
    params={[
      {
        name: "inviteId",
        type: "string",
        required: true,
        description: "Invite ID",
      },
    ]}
  />
  <ResponseExample status={204} description="No content" json={{}} />
</ApiEndpoint>

## Update Member Role

<ApiEndpoint
  method="PATCH"
  path="/v1/org/members/:memberId"
  description="Update a member's role (Owner/Admin only)."
>
  <ParameterTable
    type="path"
    params={[
      {
        name: "memberId",
        type: "string",
        required: true,
        description: "Member ID",
      },
    ]}
  />
  <ParameterTable
    type="body"
    params={[
      { name: "role", type: "string", required: true, description: "New role" },
    ]}
  />
  <RequestExample
    json={{
      role: "admin",
    }}
  />
  <ResponseExample
    status={200}
    json={{
      id: "mem_123",
      role: "admin",
    }}
  />
</ApiEndpoint>

## Remove Member

<ApiEndpoint
  method="DELETE"
  path="/v1/org/members/:memberId"
  description="Remove a member from the organization."
>
  <ParameterTable
    type="path"
    params={[
      {
        name: "memberId",
        type: "string",
        required: true,
        description: "Member ID",
      },
    ]}
  />
  <ResponseExample status={204} description="No content" json={{}} />
</ApiEndpoint>

## Transfer Ownership

<ApiEndpoint
  method="POST"
  path="/v1/org/transfer-ownership"
  description="Transfer organization ownership to another member."
>
  <ParameterTable
    type="body"
    params={[
      {
        name: "newOwnerId",
        type: "string",
        required: true,
        description: "Member ID of new owner",
      },
    ]}
  />
  <ResponseExample status={200} json={{ success: true }} />
</ApiEndpoint>

## API Keys

### List API Keys

<ApiEndpoint
  method="GET"
  path="/v1/org/api-keys"
  description="List all API keys for the organization."
>
  <ResponseExample
    status={200}
    json={{
      keys: [
        {
          id: "key_123",
          name: "CI/CD Pipeline",
          prefix: "rsk_live_...",
          scopes: ["*"],
          expiresAt: null,
          lastUsedAt: "2025-01-01T12:00:00Z",
        },
      ],
    }}
  />
</ApiEndpoint>

### Create API Key

<ApiEndpoint
  method="POST"
  path="/v1/org/api-keys"
  description="Create a new API key. The secret is only returned once."
>
  <ParameterTable
    type="body"
    params={[
      { name: "name", type: "string", required: true },
      { name: "scopes", type: "array", required: false, default: '["*"]' },
      {
        name: "expiresAt",
        type: "string",
        required: false,
        description: "ISO 8601 date",
      },
    ]}
  />
  <ResponseExample
    status={201}
    json={{
      id: "key_456",
      name: "Development Key",
      prefix: "rsk_test_...",
      secret: "rsk_test_SECRET_VALUE_...",
      scopes: ["*"],
      createdAt: "2025-01-01T00:00:00Z",
    }}
  />
</ApiEndpoint>

### Revoke API Key

<ApiEndpoint
  method="DELETE"
  path="/v1/org/api-keys/:keyId"
  description="Revoke an API key immediately."
>
  <ParameterTable
    type="path"
    params={[{ name: "keyId", type: "string", required: true }]}
  />
  <ResponseExample status={204} description="No content" json={{}} />
</ApiEndpoint>

## Public Invite Access

### Get Invite Info

<ApiEndpoint
  method="GET"
  path="/v1/invites/:token"
  auth="optional"
  description="Get public info about an invite token."
>
  <ParameterTable
    type="path"
    params={[{ name: "token", type: "string", required: true }]}
  />
  <ResponseExample
    status={200}
    json={{
      email: "colleague@example.com",
      role: "member",
      expiresAt: "2025-01-08T00:00:00Z",
    }}
  />
</ApiEndpoint>

### Accept Invite

<ApiEndpoint
  method="POST"
  path="/v1/invites/:token/accept"
  description="Accept an invite and join the organization (requires auth)."
>
  <ParameterTable
    type="path"
    params={[{ name: "token", type: "string", required: true }]}
  />
  <ResponseExample
    status={200}
    json={{
      memberId: "mem_new123",
      tenantId: "tenant_abc",
      role: "member",
    }}
  />
</ApiEndpoint>
